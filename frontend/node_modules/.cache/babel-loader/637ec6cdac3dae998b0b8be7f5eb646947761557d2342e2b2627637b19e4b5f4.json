{"ast":null,"code":"var _jsxFileName = \"/Users/ramyaranjanmishra/Desktop/veerdrishti/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = 'http://localhost:8000';\nexport default function App() {\n  _s();\n  const imgRef = useRef(null);\n  const canvasRef = useRef(null);\n  const idInputRef = useRef(null);\n  const [frameUrl, setFrameUrl] = useState(`${API_BASE}/api/frame.jpg?ts=${Date.now()}`);\n  const [detections, setDetections] = useState({\n    frame_size: [0, 0],\n    detections: []\n  });\n  const [soldiers, setSoldiers] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  const beepRef = useRef(null);\n  const [soundEnabled, setSoundEnabled] = useState(false);\n\n  // Refresh image every 1s to avoid caching\n  useEffect(() => {\n    const id = setInterval(() => {\n      setFrameUrl(`${API_BASE}/api/frame.jpg?ts=${Date.now()}`);\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Poll detections every 1s\n  useEffect(() => {\n    const id = setInterval(async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/detections`);\n        const json = await res.json();\n        setDetections(json);\n      } catch (e) {\n        // swallow\n      }\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Draw detections on canvas overlay scaled to displayed image\n  useEffect(() => {\n    const img = imgRef.current;\n    const canvas = canvasRef.current;\n    if (!img || !canvas) return;\n    const ctx = canvas.getContext('2d');\n    const dispW = img.clientWidth;\n    const dispH = img.clientHeight;\n    canvas.width = dispW;\n    canvas.height = dispH;\n    ctx.clearRect(0, 0, dispW, dispH);\n    const [frameW, frameH] = detections.frame_size || [0, 0];\n    if (!frameW || !frameH) return;\n    const scaleX = dispW / frameW;\n    const scaleY = dispH / frameH;\n    let unknownPresent = false;\n    const criminalIds = new Set();\n    (detections.detections || []).forEach(d => {\n      const [x, y, w, h] = d.bbox;\n      const sx = x * scaleX;\n      const sy = y * scaleY;\n      const sw = w * scaleX;\n      const sh = h * scaleY;\n      const isMatch = !!d.face_match;\n      // Color by category\n      if (isMatch) {\n        if (d.category === 'official') ctx.strokeStyle = 'lime';else if (d.category === 'citizen') ctx.strokeStyle = 'yellow';else if (d.category === 'criminal') ctx.strokeStyle = 'red';else ctx.strokeStyle = 'lime';\n      } else {\n        ctx.strokeStyle = 'orange';\n      }\n      ctx.lineWidth = 2;\n      ctx.strokeRect(sx, sy, sw, sh);\n      if (isMatch) {\n        if (d.category === 'official') ctx.fillStyle = 'rgba(0,255,0,0.2)';else if (d.category === 'citizen') ctx.fillStyle = 'rgba(255,255,0,0.2)';else if (d.category === 'criminal') ctx.fillStyle = 'rgba(255,0,0,0.2)';else ctx.fillStyle = 'rgba(0,255,0,0.2)';\n      } else {\n        ctx.fillStyle = 'rgba(255,165,0,0.25)';\n      }\n      ctx.fillRect(sx, sy, sw, sh);\n      ctx.fillStyle = 'white';\n      ctx.font = '12px sans-serif';\n      let label = 'unknown';\n      if (isMatch) {\n        if (d.category === 'official') label = `Official: ${d.label}`;else if (d.category === 'citizen') label = `Citizen: ${d.label}`;else if (d.category === 'criminal') label = `Criminal: ${d.label}`;else label = `Known: ${d.label}`;\n      }\n      ctx.fillText(label, sx + 4, sy - 4 < 10 ? sy + 12 : sy - 4);\n      if (!isMatch) unknownPresent = true;\n      if (isMatch && d.category === 'criminal' && d.label) criminalIds.add(d.label);\n    });\n    if (criminalIds.size > 0) {\n      triggerAlert(`Criminal alert: ${Array.from(criminalIds).join(', ')}`);\n    }\n    if (unknownPresent) {\n      triggerAlert('Unknown person detected');\n    }\n  }, [detections, frameUrl]);\n\n  // Poll soldiers every 3s\n  useEffect(() => {\n    const id = setInterval(async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/soldiers`);\n        const json = await res.json();\n        const list = json.soldiers || [];\n        setSoldiers(list);\n        if (list.some(s => s.status === 'critical')) {\n          triggerAlert('Critical soldier status');\n        }\n      } catch (e) {}\n    }, 3000);\n    return () => clearInterval(id);\n  }, []);\n  const triggerAlert = message => {\n    setAlerts(prev => [{\n      ts: Date.now(),\n      message\n    }, ...prev].slice(0, 50));\n    if (soundEnabled) {\n      try {\n        if (beepRef.current) {\n          beepRef.current.currentTime = 0;\n          beepRef.current.play();\n        }\n      } catch (e) {}\n    }\n  };\n  const enableSound = async () => {\n    try {\n      if (beepRef.current) {\n        // Attempt a play/pause cycle to unlock autoplay\n        await beepRef.current.play();\n        beepRef.current.pause();\n        beepRef.current.currentTime = 0;\n        setSoundEnabled(true);\n      }\n    } catch (e) {\n      // If still blocked, user may need to click again\n    }\n  };\n  const onSubmitRegister = async e => {\n    e.preventDefault();\n    const form = new FormData(e.currentTarget);\n    const id = form.get('id');\n    const file = form.get('file');\n    const category = form.get('category') || 'citizen';\n    if (!id || !file) return;\n    try {\n      form.set('category', category);\n      await fetch(`${API_BASE}/api/register-face`, {\n        method: 'POST',\n        body: form\n      });\n      triggerAlert(`Registered face for ${id}`);\n      e.currentTarget.reset();\n    } catch (e) {}\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto p-4 md:p-6 space-y-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: beepRef,\n      src: \"data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAABCxAgAEABAAZGF0YQAAAAA=\",\n      preload: \"auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl md:text-3xl font-bold tracking-tight\",\n        children: \"VeerDrishti\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs md:text-sm text-slate-500\",\n        children: \"Live Vision \\xB7 Simple CPU Pipeline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), !soundEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 bg-yellow-100 text-yellow-900 rounded flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Click to enable alert sounds (browser autoplay policy).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: enableSound,\n        className: \"ml-3 px-3 py-1 bg-yellow-600 text-white rounded\",\n        children: \"Enable Sound\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid md:grid-cols-3 gap-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full overflow-hidden rounded-xl shadow ring-1 ring-slate-200 bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            ref: imgRef,\n            crossOrigin: \"anonymous\",\n            src: frameUrl,\n            alt: \"live\",\n            className: \"w-full h-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            className: \"absolute inset-0 w-full h-full pointer-events-none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onSubmitRegister,\n          className: \"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200 space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-semibold\",\n            children: \"Register Face\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: idInputRef,\n            name: \"id\",\n            className: \"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            placeholder: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category\",\n            defaultValue: \"citizen\",\n            className: \"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"citizen\",\n              children: \"Citizen (yellow)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"official\",\n              children: \"Official (green)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"criminal\",\n              children: \"Criminal (red)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"file\",\n            type: \"file\",\n            accept: \"image/*\",\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full bg-blue-600 hover:bg-blue-700 transition text-white py-2 rounded\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: async () => {\n              var _idInputRef$current, _idInputRef$current$v;\n              const idVal = (_idInputRef$current = idInputRef.current) === null || _idInputRef$current === void 0 ? void 0 : (_idInputRef$current$v = _idInputRef$current.value) === null || _idInputRef$current$v === void 0 ? void 0 : _idInputRef$current$v.trim();\n              const img = imgRef.current;\n              if (!idVal) {\n                alert('Enter ID first');\n                return;\n              }\n              if (!img || !img.complete) {\n                alert('Live image not ready');\n                return;\n              }\n              try {\n                const w = img.naturalWidth || img.width;\n                const h = img.naturalHeight || img.height;\n                const off = document.createElement('canvas');\n                off.width = w;\n                off.height = h;\n                const ctx = off.getContext('2d');\n                ctx.drawImage(img, 0, 0, w, h);\n                off.toBlob(async blob => {\n                  if (!blob) {\n                    alert('Capture failed');\n                    return;\n                  }\n                  const fd = new FormData();\n                  fd.append('id', idVal);\n                  const formEl = document.querySelector('form');\n                  const sel = formEl === null || formEl === void 0 ? void 0 : formEl.querySelector('select[name=\"category\"]');\n                  const catVal = (sel === null || sel === void 0 ? void 0 : sel.value) || 'citizen';\n                  fd.append('category', catVal);\n                  fd.append('file', blob, `${idVal}-${Date.now()}.jpg`);\n                  await fetch(`${API_BASE}/api/register-face`, {\n                    method: 'POST',\n                    body: fd\n                  });\n                  triggerAlert(`Captured and registered face for ${idVal}`);\n                }, 'image/jpeg', 0.9);\n              } catch (e) {\n                // ignore\n              }\n            },\n            className: \"w-full bg-green-600 hover:bg-green-700 transition text-white py-2 rounded\",\n            children: \"Capture current frame\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-semibold mb-2\",\n            children: \"Alerts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1 max-h-48 overflow-auto\",\n            children: [alerts.map(a => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-red-700\",\n              children: [new Date(a.ts).toLocaleTimeString(), \" - \", a.message]\n            }, a.ts, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)), alerts.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-gray-500 text-sm\",\n              children: \"No alerts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), soldiers.some(s => s.status === 'critical') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 bg-red-600 text-white rounded\",\n      children: \"Critical soldier status detected!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid sm:grid-cols-2 md:grid-cols-4 gap-4\",\n      children: soldiers.map(s => {\n        var _s$gps, _s$gps2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: s.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm\",\n            children: [\"HR: \", s.heart_rate, \" bpm\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm\",\n            children: [\"GPS: \", (_s$gps = s.gps) === null || _s$gps === void 0 ? void 0 : _s$gps[0], \", \", (_s$gps2 = s.gps) === null || _s$gps2 === void 0 ? void 0 : _s$gps2[1]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-700\",\n            children: [\"Activity: \", s.activity || 'patrol']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-sm ${s.status === 'critical' ? 'text-red-700 font-bold' : s.status === 'warn' ? 'text-yellow-700 font-semibold' : 'text-gray-700'}`,\n            children: [\"Status: \", s.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, s.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ew+mgyHLfAGH5VUyGrfupn8NHGA=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","API_BASE","App","_s","imgRef","canvasRef","idInputRef","frameUrl","setFrameUrl","Date","now","detections","setDetections","frame_size","soldiers","setSoldiers","alerts","setAlerts","beepRef","soundEnabled","setSoundEnabled","id","setInterval","clearInterval","res","fetch","json","e","img","current","canvas","ctx","getContext","dispW","clientWidth","dispH","clientHeight","width","height","clearRect","frameW","frameH","scaleX","scaleY","unknownPresent","criminalIds","Set","forEach","d","x","y","w","h","bbox","sx","sy","sw","sh","isMatch","face_match","category","strokeStyle","lineWidth","strokeRect","fillStyle","fillRect","font","label","fillText","add","size","triggerAlert","Array","from","join","list","some","s","status","message","prev","ts","slice","currentTime","play","enableSound","pause","onSubmitRegister","preventDefault","form","FormData","currentTarget","get","file","set","method","body","reset","className","children","ref","src","preload","fileName","_jsxFileName","lineNumber","columnNumber","onClick","crossOrigin","alt","onSubmit","name","placeholder","defaultValue","value","type","accept","_idInputRef$current","_idInputRef$current$v","idVal","trim","alert","complete","naturalWidth","naturalHeight","off","document","createElement","drawImage","toBlob","blob","fd","append","formEl","querySelector","sel","catVal","map","a","toLocaleTimeString","length","_s$gps","_s$gps2","heart_rate","gps","activity","_c","$RefreshReg$"],"sources":["/Users/ramyaranjanmishra/Desktop/veerdrishti/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst API_BASE = 'http://localhost:8000';\n\nexport default function App() {\n  const imgRef = useRef(null);\n  const canvasRef = useRef(null);\n  const idInputRef = useRef(null);\n\n  const [frameUrl, setFrameUrl] = useState(`${API_BASE}/api/frame.jpg?ts=${Date.now()}`);\n  const [detections, setDetections] = useState({ frame_size: [0, 0], detections: [] });\n  const [soldiers, setSoldiers] = useState([]);\n  const [alerts, setAlerts] = useState([]);\n  const beepRef = useRef(null);\n  const [soundEnabled, setSoundEnabled] = useState(false);\n\n  // Refresh image every 1s to avoid caching\n  useEffect(() => {\n    const id = setInterval(() => {\n      setFrameUrl(`${API_BASE}/api/frame.jpg?ts=${Date.now()}`);\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Poll detections every 1s\n  useEffect(() => {\n    const id = setInterval(async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/detections`);\n        const json = await res.json();\n        setDetections(json);\n      } catch (e) {\n        // swallow\n      }\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Draw detections on canvas overlay scaled to displayed image\n  useEffect(() => {\n    const img = imgRef.current;\n    const canvas = canvasRef.current;\n    if (!img || !canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    const dispW = img.clientWidth;\n    const dispH = img.clientHeight;\n    canvas.width = dispW;\n    canvas.height = dispH;\n\n    ctx.clearRect(0, 0, dispW, dispH);\n\n    const [frameW, frameH] = detections.frame_size || [0, 0];\n    if (!frameW || !frameH) return;\n    const scaleX = dispW / frameW;\n    const scaleY = dispH / frameH;\n\n    let unknownPresent = false;\n    const criminalIds = new Set();\n    (detections.detections || []).forEach(d => {\n      const [x, y, w, h] = d.bbox;\n      const sx = x * scaleX;\n      const sy = y * scaleY;\n      const sw = w * scaleX;\n      const sh = h * scaleY;\n\n      const isMatch = !!d.face_match;\n      // Color by category\n      if (isMatch) {\n        if (d.category === 'official') ctx.strokeStyle = 'lime';\n        else if (d.category === 'citizen') ctx.strokeStyle = 'yellow';\n        else if (d.category === 'criminal') ctx.strokeStyle = 'red';\n        else ctx.strokeStyle = 'lime';\n      } else {\n        ctx.strokeStyle = 'orange';\n      }\n      ctx.lineWidth = 2;\n      ctx.strokeRect(sx, sy, sw, sh);\n      if (isMatch) {\n        if (d.category === 'official') ctx.fillStyle = 'rgba(0,255,0,0.2)';\n        else if (d.category === 'citizen') ctx.fillStyle = 'rgba(255,255,0,0.2)';\n        else if (d.category === 'criminal') ctx.fillStyle = 'rgba(255,0,0,0.2)';\n        else ctx.fillStyle = 'rgba(0,255,0,0.2)';\n      } else {\n        ctx.fillStyle = 'rgba(255,165,0,0.25)';\n      }\n      ctx.fillRect(sx, sy, sw, sh);\n      ctx.fillStyle = 'white';\n      ctx.font = '12px sans-serif';\n      let label = 'unknown';\n      if (isMatch) {\n        if (d.category === 'official') label = `Official: ${d.label}`;\n        else if (d.category === 'citizen') label = `Citizen: ${d.label}`;\n        else if (d.category === 'criminal') label = `Criminal: ${d.label}`;\n        else label = `Known: ${d.label}`;\n      }\n      ctx.fillText(label, sx + 4, sy - 4 < 10 ? sy + 12 : sy - 4);\n\n      if (!isMatch) unknownPresent = true;\n      if (isMatch && d.category === 'criminal' && d.label) criminalIds.add(d.label);\n    });\n\n    if (criminalIds.size > 0) {\n      triggerAlert(`Criminal alert: ${Array.from(criminalIds).join(', ')}`);\n    }\n    if (unknownPresent) {\n      triggerAlert('Unknown person detected');\n    }\n  }, [detections, frameUrl]);\n\n  // Poll soldiers every 3s\n  useEffect(() => {\n    const id = setInterval(async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/soldiers`);\n        const json = await res.json();\n        const list = json.soldiers || [];\n        setSoldiers(list);\n        if (list.some(s => s.status === 'critical')) {\n          triggerAlert('Critical soldier status');\n        }\n      } catch (e) {}\n    }, 3000);\n    return () => clearInterval(id);\n  }, []);\n\n  const triggerAlert = (message) => {\n    setAlerts(prev => [{ ts: Date.now(), message }, ...prev].slice(0, 50));\n    if (soundEnabled) {\n      try {\n        if (beepRef.current) {\n          beepRef.current.currentTime = 0;\n          beepRef.current.play();\n        }\n      } catch (e) {}\n    }\n  };\n\n  const enableSound = async () => {\n    try {\n      if (beepRef.current) {\n        // Attempt a play/pause cycle to unlock autoplay\n        await beepRef.current.play();\n        beepRef.current.pause();\n        beepRef.current.currentTime = 0;\n        setSoundEnabled(true);\n      }\n    } catch (e) {\n      // If still blocked, user may need to click again\n    }\n  };\n\n  const onSubmitRegister = async (e) => {\n    e.preventDefault();\n    const form = new FormData(e.currentTarget);\n    const id = form.get('id');\n    const file = form.get('file');\n    const category = form.get('category') || 'citizen';\n    if (!id || !file) return;\n    try {\n      form.set('category', category);\n      await fetch(`${API_BASE}/api/register-face`, { method: 'POST', body: form });\n      triggerAlert(`Registered face for ${id}`);\n      e.currentTarget.reset();\n    } catch (e) {}\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 md:p-6 space-y-5\">\n      <audio ref={beepRef} src=\"data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAABCxAgAEABAAZGF0YQAAAAA=\" preload=\"auto\" />\n\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl md:text-3xl font-bold tracking-tight\">VeerDrishti</h1>\n        <div className=\"text-xs md:text-sm text-slate-500\">Live Vision · Simple CPU Pipeline</div>\n      </div>\n\n      {!soundEnabled && (\n        <div className=\"p-2 bg-yellow-100 text-yellow-900 rounded flex items-center justify-between\">\n          <span>Click to enable alert sounds (browser autoplay policy).</span>\n          <button onClick={enableSound} className=\"ml-3 px-3 py-1 bg-yellow-600 text-white rounded\">Enable Sound</button>\n        </div>\n      )}\n\n      <div className=\"grid md:grid-cols-3 gap-5\">\n        <div className=\"md:col-span-2\">\n          <div className=\"relative w-full overflow-hidden rounded-xl shadow ring-1 ring-slate-200 bg-white\">\n            <img ref={imgRef} crossOrigin=\"anonymous\" src={frameUrl} alt=\"live\" className=\"w-full h-auto\" />\n            <canvas ref={canvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" />\n          </div>\n        </div>\n        <div className=\"space-y-3\">\n          <form onSubmit={onSubmitRegister} className=\"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200 space-y-3\">\n            <h2 className=\"font-semibold\">Register Face</h2>\n            <input ref={idInputRef} name=\"id\" className=\"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\" placeholder=\"ID\" />\n            <select name=\"category\" defaultValue=\"citizen\" className=\"w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\">\n              <option value=\"citizen\">Citizen (yellow)</option>\n              <option value=\"official\">Official (green)</option>\n              <option value=\"criminal\">Criminal (red)</option>\n            </select>\n            <input name=\"file\" type=\"file\" accept=\"image/*\" className=\"w-full\" />\n            <button className=\"w-full bg-blue-600 hover:bg-blue-700 transition text-white py-2 rounded\">Submit</button>\n            <button type=\"button\" onClick={async () => {\n              const idVal = idInputRef.current?.value?.trim();\n              const img = imgRef.current;\n              if (!idVal) { alert('Enter ID first'); return; }\n              if (!img || !img.complete) { alert('Live image not ready'); return; }\n              try {\n                const w = img.naturalWidth || img.width;\n                const h = img.naturalHeight || img.height;\n                const off = document.createElement('canvas');\n                off.width = w; off.height = h;\n                const ctx = off.getContext('2d');\n                ctx.drawImage(img, 0, 0, w, h);\n                off.toBlob(async (blob) => {\n                  if (!blob) { alert('Capture failed'); return; }\n                  const fd = new FormData();\n                  fd.append('id', idVal);\n                  const formEl = document.querySelector('form');\n                  const sel = formEl?.querySelector('select[name=\"category\"]');\n                  const catVal = sel?.value || 'citizen';\n                  fd.append('category', catVal);\n                  fd.append('file', blob, `${idVal}-${Date.now()}.jpg`);\n                  await fetch(`${API_BASE}/api/register-face`, { method: 'POST', body: fd });\n                  triggerAlert(`Captured and registered face for ${idVal}`);\n                }, 'image/jpeg', 0.9);\n              } catch (e) {\n                // ignore\n              }\n            }} className=\"w-full bg-green-600 hover:bg-green-700 transition text-white py-2 rounded\">Capture current frame</button>\n          </form>\n\n          <div className=\"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200\">\n            <h2 className=\"font-semibold mb-2\">Alerts</h2>\n            <div className=\"space-y-1 max-h-48 overflow-auto\">\n              {alerts.map(a => (\n                <div key={a.ts} className=\"text-sm text-red-700\">{new Date(a.ts).toLocaleTimeString()} - {a.message}</div>\n              ))}\n              {alerts.length === 0 && <div className=\"text-gray-500 text-sm\">No alerts</div>}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {soldiers.some(s => s.status === 'critical') && (\n        <div className=\"p-2 bg-red-600 text-white rounded\">Critical soldier status detected!</div>\n      )}\n\n      <div className=\"grid sm:grid-cols-2 md:grid-cols-4 gap-4\">\n        {soldiers.map(s => (\n          <div key={s.id} className=\"p-4 bg-white rounded-xl shadow ring-1 ring-slate-200\">\n            <div className=\"font-semibold\">{s.id}</div>\n            <div className=\"text-sm\">HR: {s.heart_rate} bpm</div>\n            <div className=\"text-sm\">GPS: {s.gps?.[0]}, {s.gps?.[1]}</div>\n            <div className=\"text-sm text-gray-700\">Activity: {s.activity || 'patrol'}</div>\n            <div className={`text-sm ${s.status === 'critical' ? 'text-red-700 font-bold' : s.status === 'warn' ? 'text-yellow-700 font-semibold' : 'text-gray-700'}`}>Status: {s.status}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}